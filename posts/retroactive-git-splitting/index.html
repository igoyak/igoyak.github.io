<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Retroactive git splitting pattern | Gustav Larsson</title>


<meta property="og:title" content=ZgotmplZ />
<meta name="twitter:title" content=ZgotmplZ />
<meta itemprop="name" content=ZgotmplZ />
<meta name="application-name" content=ZgotmplZ />
<meta property="og:site_name" content="Gustav Larsson" />


<meta name="description" content="" />
<meta itemprop="description" content="" />
<meta property="og:description" content="" />
<meta name="twitter:description" content="" />


<base href="/posts/retroactive-git-splitting/" />
<link rel="canonical" href="/posts/retroactive-git-splitting/" itemprop="url" />
<meta name="url" content="/posts/retroactive-git-splitting/" />
<meta name="twitter:url" content="/posts/retroactive-git-splitting/" />
<meta property="og:url" content="/posts/retroactive-git-splitting/" />


<meta property="og:updated_time" content="2023-09-27T12:00:00&#43;03:00" />


<link rel="sitemap" type="application/xml" title="Sitemap" href='/sitemap.xml' />

<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />


<meta name="apple-mobile-web-app-title" content="Gustav Larsson" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />






      <link rel="stylesheet" href="/css/main.min.57c172886885b0d24ebac97575c9a7be993d0e5d8d798dfaa1c5d3d63f954dca.css" integrity="sha256-V8FyiGiFsNJOusl1dcmnvpk9Dl2NeY36ocXT1j&#43;VTco=" crossorigin="anonymous">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">


        <script src="/js/main.f2979a93a325fecf9605263bd141398a311c8e23388ed7dcff74f92f7e632866.js" integrity="sha256-8peak6Ml/s&#43;WBSY70UE5ijEcjiM4jtfc/3T5L35jKGY=" crossorigin="anonymous"></script>


</head>
<body>
  <header>
    <h1>
    <a href="/">
    Gustav Larsson
    </a>
</h1>

  <nav>
    <ul>
    <li>
      <a href="/">Home</a>
    </li>
    <li>
      <a aria-current="true" class="ancestor" href="/posts/">Posts</a>
    </li>
    </ul>
  </nav>


  </header>
  <main>
    
  <h1>Retroactive git splitting pattern</h1>

  
  
  <time datetime="2023-09-27T12:00:00&#43;03:00">September 27, 2023</time>

  <p>I&rsquo;ve found that I use this little git-pattern quite often.</p>

<div style="display: flex; flex-flow: row wrap; border: 0px solid grey">
<figure style="margin: 5px; margin-top: auto; flex: 1 0 0;"><img  style="width: 100%"src="images/1-3.png"><figcaption>
  <h4>Full diff</h4>
</figcaption></figure>
<figure style="margin: 5px; margin-top: auto; width: 30%; flex: 1 0 0;"><img style="width: 100%" src="images/1-2.png"><figcaption>
  <h4>Pure refactor</h4>
</figcaption></figure>
<figure style="margin: 5px; margin-top: auto; width: 30%; flex: 1 0 0;"><img style="width: 100%;" src="images/2-3.png"><figcaption>
  <h4>Actual change</h4>
</figcaption></figure>
</div>


<p><strong>Situation</strong>:</p>
<ul>
<li>I&rsquo;ve developed a feature, having made one commit</li>
<li>The final result is good, but the diff is large and difficult to read</li>
</ul>
<p>This is usually the case when some refactoring was needed, for example inlining/extracting, nesting/un-nesting etc.</p>
<p><strong>Pattern</strong>:</p>
<ul>
<li><code>git branch feature-backup</code> Back up the current branch with the final state</li>
<li><code>git reset --hard master</code> Restore current branch to master</li>
<li>Redo only the refactoring. <code>git commit</code>, with a message making it clear no business logic has changed</li>
<li><code>git checkout feature-backup -- .</code> Restore the working directory to the wanted final state again</li>
<li><code>git commit</code> with the actual feature</li>
</ul>
<p>This allows me to create easy-to-review pull requests, improving the lives of my reviewers when the development process isn&rsquo;t linear.</p>
  <hr>
<div class="footer">
	
	
        <div class="next-post">
            <a href="/posts/paper-comeback/?ref=footer"><span style="font-weight:bold;">Next Â»</span><br>Paper Comeback?</a>
        </div>
    
    <br/>
</div>

  


  </main>
</body>
</html>
